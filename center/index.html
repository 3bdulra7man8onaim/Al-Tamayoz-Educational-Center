<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>๐ ูุฑูุฒ ุงูุชููุฒ ุงูุชุนูููู</title>
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>๐</text></svg>">
    
    <!-- Meta Tags -->
    <meta name="description" content="ูุธุงู ุฅุฏุงุฑุฉ ูุฑูุฒ ุงูุชููุฒ ุงูุชุนูููู - ุฅุฏุงุฑุฉ ุดุงููุฉ ููุทูุงุจ ูุงููุฏุฑุณูู ูุงููุฌููุนุงุช">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ูุฑูุฒ ุงูุชููุฒ">
    
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ - ุงุฎุชูุงุฑ ุงูุณูุฉ -->
    <div id="home-page" class="page active">
        <div class="header">
            <div>
                <h1>๐ ูุฑูุฒ ุงูุชููุฒ ุงูุชุนูููู</h1>
                <p>ุงุฎุชุฑ ุงูุณูุฉ ุงูุฏุฑุงุณูุฉ</p>
            </div>
            <button class="theme-toggle" onclick="toggleTheme()" id="theme-toggle-btn">๐</button>
        </div>
        
        <!-- ุดุฑูุท ุงูุจุญุซ ุงูุนุงู -->
        <div class="search-container">
            <input type="text" id="global-search" placeholder="๐ ุงุจุญุซ ุนู ุทุงูุจ ุฃู ูุฏุฑุณ..." class="search-input">
            <div id="global-search-results" class="search-results"></div>
        </div>
        
        <div class="grades-container">
            <button class="grade-btn prep" onclick="selectGrade('prep1', 'ุฃููู ุฅุนุฏุงุฏู')">
                <span class="grade-icon">๐</span>
                <span class="grade-text">ุฃููู ุฅุนุฏุงุฏู</span>
            </button>
            
            <button class="grade-btn prep" onclick="selectGrade('prep2', 'ุซุงููุฉ ุฅุนุฏุงุฏู')">
                <span class="grade-icon">๐</span>
                <span class="grade-text">ุซุงููุฉ ุฅุนุฏุงุฏู</span>
            </button>
            
            <button class="grade-btn prep" onclick="selectGrade('prep3', 'ุซุงูุซุฉ ุฅุนุฏุงุฏู')">
                <span class="grade-icon">๐</span>
                <span class="grade-text">ุซุงูุซุฉ ุฅุนุฏุงุฏู</span>
            </button>
            
            <button class="grade-btn sec" onclick="selectGrade('sec1', 'ุฃููู ุซุงููู')">
                <span class="grade-icon">๐ฏ</span>
                <span class="grade-text">ุฃููู ุซุงููู</span>
            </button>
            
            <button class="grade-btn sec" onclick="selectGrade('sec2', 'ุซุงููุฉ ุซุงููู')">
                <span class="grade-icon">๐ฏ</span>
                <span class="grade-text">ุซุงููุฉ ุซุงููู</span>
            </button>
            
            <button class="grade-btn sec" onclick="selectGrade('sec3', 'ุซุงูุซุฉ ุซุงููู')">
                <span class="grade-icon">๐ฏ</span>
                <span class="grade-text">ุซุงูุซุฉ ุซุงููู</span>
            </button>
        </div>
    </div>

    <!-- ุตูุญุฉ ุงูููุงุฏ -->
    <div id="subjects-page" class="page">
        <div class="header">
            <button class="back-btn" onclick="goBack()">โ</button>
            <div>
                <h2 id="grade-title"></h2>
                <p>ุงุฎุชุฑ ุงููุงุฏุฉ</p>
            </div>
        </div>
        
        <!-- ุดุฑูุท ุงูุจุญุซ ูู ุงููุงุฏุฉ -->
        <div class="search-container">
            <input type="text" id="subject-search" placeholder="๐ ุงุจุญุซ ุนู ุทุงูุจ ูู ูุฐู ุงููุงุฏุฉ..." class="search-input">
            <div id="subject-search-results" class="search-results"></div>
        </div>
        
        <button class="add-btn" onclick="showAddSubjectModal()">+ ุฅุถุงูุฉ ูุงุฏุฉ ุฌุฏูุฏุฉ</button>
        
        <div id="subjects-container" class="subjects-grid"></div>
    </div>

    <!-- ุตูุญุฉ ุงููุฏุฑุณูู -->
    <div id="teachers-page" class="page">
        <div class="header">
            <button class="back-btn" onclick="goBack()">โ</button>
            <div>
                <h2 id="subject-title"></h2>
                <p id="subject-grade"></p>
            </div>
        </div>
        
        <button class="add-btn" onclick="showAddTeacherModal()">+ ุฅุถุงูุฉ ูุฏุฑุณ</button>
        
        <div id="teachers-container" class="list-container"></div>
    </div>

    <!-- ุตูุญุฉ ุงููุฌููุนุงุช -->
    <div id="groups-page" class="page">
        <div class="header">
            <button class="back-btn" onclick="goBack()">โ</button>
            <div>
                <h2 id="teacher-name"></h2>
                <p id="teacher-subject"></p>
            </div>
        </div>
        
        <button class="add-btn" onclick="showAddGroupModal()">+ ุฅุถุงูุฉ ูุฌููุนุฉ</button>
        
        <div id="groups-container" class="list-container"></div>
    </div>

    <!-- ุตูุญุฉ ุงูุทูุงุจ -->
    <div id="students-page" class="page">
        <div class="header">
            <button class="back-btn" onclick="goBack()">โ</button>
            <div>
                <h2 id="group-time"></h2>
                <p id="group-teacher"></p>
            </div>
        </div>
        
        <!-- ุดุฑูุท ุงูุจุญุซ ูู ุงูุทูุงุจ -->
        <div class="search-container">
            <input type="text" id="students-search" placeholder="๐ ุงุจุญุซ ุนู ุทุงูุจ ูู ูุฐู ุงููุฌููุนุฉ..." class="search-input">
        </div>
        
        <button class="add-btn" onclick="showAddStudentModal()">+ ุฅุถุงูุฉ ุทุงูุจ</button>
        
        <button class="whatsapp-stats-btn" onclick="sendTeacherStatistics()">
            ๐ ุฅุฑุณุงู ุฅุญุตุงุฆูุงุช ูููุฏุฑุณ ุนุจุฑ ูุงุชุณุงุจ
        </button>
        
        <div id="students-container" class="list-container"></div>
    </div>

    <!-- ุตูุญุฉ ุงูุทุงูุจ -->
    <div id="student-page" class="page">
        <div class="header">
            <button class="back-btn" onclick="goBack()">โ</button>
            <div>
                <h2 id="student-name-title"></h2>
                <p id="student-group-info"></p>
            </div>
        </div>
        
        <div class="student-profile">
            <div class="profile-section">
                <h3>๐ ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ</h3>
                <div class="info-grid">
                    <div class="info-item">
                        <span class="label">ุฑูู ุงูุทุงูุจ:</span>
                        <span id="student-phone" class="value"></span>
                    </div>
                    <div class="info-item">
                        <span class="label">ุฑูู ููู ุงูุฃูุฑ:</span>
                        <span id="student-parent" class="value"></span>
                    </div>
                    <div class="info-item">
                        <span class="label">ุบูุงุจ ุงูุดูุฑ:</span>
                        <span id="student-absences" class="value badge-red"></span>
                    </div>
                    <div class="info-item">
                        <span class="label">ุญุงูุฉ ุงูุฏูุน:</span>
                        <span id="student-payment" class="value"></span>
                    </div>
                </div>
            </div>

            <div class="profile-section">
                <h3>๐ ุงูุฏุฑุฌุงุช</h3>
                <button class="add-btn-small" onclick="showAddGradeModal()">+ ุฅุถุงูุฉ ุฏุฑุฌุฉ</button>
                <div id="grades-list" class="grades-list"></div>
            </div>

            <div class="profile-section">
                <h3>๐ฐ ุงูุฏูุน</h3>
                <div class="payment-info">
                    <div class="info-item">
                        <span class="label">ุงูุดูุฑ ุงูุญุงูู:</span>
                        <span id="current-month" class="value"></span>
                    </div>
                    <div class="info-item">
                        <span class="label">ุขุฎุฑ ุฏูุนุฉ:</span>
                        <span id="last-payment-month" class="value"></span>
                    </div>
                </div>
                <button class="payment-btn" onclick="showPaymentModal()">
                    ๐ฐ ุชุณุฌูู ุฏูุนุฉ ุฌุฏูุฏุฉ
                </button>
            </div>

            <div class="profile-section">
                <h3>๐ฑ ุฅุฑุณุงู ุฑุณุงูุฉ ูุงุชุณุงุจ</h3>
                <button class="whatsapp-btn" onclick="sendWhatsAppMessage()">
                    ๐ค ุฅุฑุณุงู ุฑุณุงูุฉ ูููู ุงูุฃูุฑ
                </button>
            </div>
            
            <div class="profile-section">
                <button class="edit-btn" onclick="showEditStudentModal()">
                    โ๏ธ ุชุนุฏูู ุจูุงูุงุช ุงูุทุงูุจ
                </button>
            </div>
        </div>
    </div>

    <!-- Modal ุฅุถุงูุฉ ูุฏุฑุณ -->
    <div id="add-teacher-modal" class="modal">
        <div class="modal-content">
            <h3>ุฅุถุงูุฉ ูุฏุฑุณ ุฌุฏูุฏ</h3>
            <input type="text" id="teacher-name-input" placeholder="ุงุณู ุงููุฏุฑุณ *" class="input">
            <input type="tel" id="teacher-phone-input" placeholder="ุฑูู ูุงุชู ุงููุฏุฑุณ *" class="input">
            <input type="number" id="teacher-price-input" placeholder="ุณุนุฑ ุงูุดูุฑ (ุงุฎุชูุงุฑู)" class="input">
            <div class="modal-buttons">
                <button class="btn-primary" onclick="addTeacher()">ุฅุถุงูุฉ</button>
                <button class="btn-secondary" onclick="closeModal()">ุฅูุบุงุก</button>
            </div>
        </div>
    </div>

    <!-- Modal ุฅุถุงูุฉ ูุฌููุนุฉ -->
    <div id="add-group-modal" class="modal">
        <div class="modal-content">
            <h3>ุฅุถุงูุฉ ูุฌููุนุฉ ุฌุฏูุฏุฉ</h3>
            <p style="font-size: 14px; color: #666; margin-bottom: 15px;">ุงุฎุชุฑ ุงูุฃูุงู ูุงูููุงุนูุฏ:</p>
            
            <div class="day-time-selector">
                <div class="day-item">
                    <label class="day-checkbox">
                        <input type="checkbox" value="ุงูุณุจุช" onchange="toggleDayTime(this)">
                        <span>ุงูุณุจุช</span>
                    </label>
                    <div class="time-period-group">
                        <input type="time" class="day-time-input" data-day="ุงูุณุจุช" disabled>
                        <select class="day-period-select" data-day="ุงูุณุจุช" disabled>
                            <option value="ุต">ุตุจุงุญุงู</option>
                            <option value="ู">ูุณุงุกู</option>
                        </select>
                    </div>
                </div>
                
                <div class="day-item">
                    <label class="day-checkbox">
                        <input type="checkbox" value="ุงูุฃุญุฏ" onchange="toggleDayTime(this)">
                        <span>ุงูุฃุญุฏ</span>
                    </label>
                    <div class="time-period-group">
                        <input type="time" class="day-time-input" data-day="ุงูุฃุญุฏ" disabled>
                        <select class="day-period-select" data-day="ุงูุฃุญุฏ" disabled>
                            <option value="ุต">ุตุจุงุญุงู</option>
                            <option value="ู">ูุณุงุกู</option>
                        </select>
                    </div>
                </div>
                
                <div class="day-item">
                    <label class="day-checkbox">
                        <input type="checkbox" value="ุงูุงุซููู" onchange="toggleDayTime(this)">
                        <span>ุงูุงุซููู</span>
                    </label>
                    <div class="time-period-group">
                        <input type="time" class="day-time-input" data-day="ุงูุงุซููู" disabled>
                        <select class="day-period-select" data-day="ุงูุงุซููู" disabled>
                            <option value="ุต">ุตุจุงุญุงู</option>
                            <option value="ู">ูุณุงุกู</option>
                        </select>
                    </div>
                </div>
                
                <div class="day-item">
                    <label class="day-checkbox">
                        <input type="checkbox" value="ุงูุซูุงุซุงุก" onchange="toggleDayTime(this)">
                        <span>ุงูุซูุงุซุงุก</span>
                    </label>
                    <div class="time-period-group">
                        <input type="time" class="day-time-input" data-day="ุงูุซูุงุซุงุก" disabled>
                        <select class="day-period-select" data-day="ุงูุซูุงุซุงุก" disabled>
                            <option value="ุต">ุตุจุงุญุงู</option>
                            <option value="ู">ูุณุงุกู</option>
                        </select>
                    </div>
                </div>
                
                <div class="day-item">
                    <label class="day-checkbox">
                        <input type="checkbox" value="ุงูุฃุฑุจุนุงุก" onchange="toggleDayTime(this)">
                        <span>ุงูุฃุฑุจุนุงุก</span>
                    </label>
                    <div class="time-period-group">
                        <input type="time" class="day-time-input" data-day="ุงูุฃุฑุจุนุงุก" disabled>
                        <select class="day-period-select" data-day="ุงูุฃุฑุจุนุงุก" disabled>
                            <option value="ุต">ุตุจุงุญุงู</option>
                            <option value="ู">ูุณุงุกู</option>
                        </select>
                    </div>
                </div>
                
                <div class="day-item">
                    <label class="day-checkbox">
                        <input type="checkbox" value="ุงูุฎููุณ" onchange="toggleDayTime(this)">
                        <span>ุงูุฎููุณ</span>
                    </label>
                    <div class="time-period-group">
                        <input type="time" class="day-time-input" data-day="ุงูุฎููุณ" disabled>
                        <select class="day-period-select" data-day="ุงูุฎููุณ" disabled>
                            <option value="ุต">ุตุจุงุญุงู</option>
                            <option value="ู">ูุณุงุกู</option>
                        </select>
                    </div>
                </div>
                
                <div class="day-item">
                    <label class="day-checkbox">
                        <input type="checkbox" value="ุงูุฌูุนุฉ" onchange="toggleDayTime(this)">
                        <span>ุงูุฌูุนุฉ</span>
                    </label>
                    <div class="time-period-group">
                        <input type="time" class="day-time-input" data-day="ุงูุฌูุนุฉ" disabled>
                        <select class="day-period-select" data-day="ุงูุฌูุนุฉ" disabled>
                            <option value="ุต">ุตุจุงุญุงู</option>
                            <option value="ู">ูุณุงุกู</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <div class="modal-buttons">
                <button class="btn-primary" onclick="addGroup()">ุฅุถุงูุฉ</button>
                <button class="btn-secondary" onclick="closeModal()">ุฅูุบุงุก</button>
            </div>
        </div>
    </div>

    <!-- Modal ุฅุถุงูุฉ ุทุงูุจ -->
    <div id="add-student-modal" class="modal">
        <div class="modal-content">
            <h3>ุฅุถุงูุฉ ุทุงูุจ ุฌุฏูุฏ</h3>
            <input type="text" id="student-name-input" placeholder="ุงุณู ุงูุทุงูุจ *" class="input">
            <input type="tel" id="student-phone-input" placeholder="ุฑูู ุงูุทุงูุจ (ุงุฎุชูุงุฑู)" class="input">
            <input type="tel" id="student-parent-input" placeholder="ุฑูู ููู ุงูุฃูุฑ (ุงุฎุชูุงุฑู)" class="input">
            <textarea id="student-notes-input" placeholder="ููุงุญุธุงุช (ุงุฎุชูุงุฑู)" class="input" rows="3"></textarea>
            <div class="modal-buttons">
                <button class="btn-primary" onclick="addStudent()">ุฅุถุงูุฉ</button>
                <button class="btn-secondary" onclick="closeModal()">ุฅูุบุงุก</button>
            </div>
        </div>
    </div>

    <!-- Modal ุฅุถุงูุฉ ุฏุฑุฌุฉ -->
    <div id="add-grade-modal" class="modal">
        <div class="modal-content">
            <h3>ุฅุถุงูุฉ ุฏุฑุฌุฉ</h3>
            <input type="text" id="exam-name-input" placeholder="ุงุณู ุงูุงูุชุญุงู" class="input">
            <input type="number" id="exam-grade-input" placeholder="ุงูุฏุฑุฌุฉ" class="input">
            <input type="number" id="exam-total-input" placeholder="ูู (ุงูุฏุฑุฌุฉ ุงููุงููุฉ)" class="input">
            <div class="modal-buttons">
                <button class="btn-primary" onclick="addGrade()">ุฅุถุงูุฉ</button>
                <button class="btn-secondary" onclick="closeModal()">ุฅูุบุงุก</button>
            </div>
        </div>
    </div>

    <!-- Modal ุชุณุฌูู ุงูุฏูุน -->
    <div id="payment-modal" class="modal">
        <div class="modal-content">
            <h3 id="payment-modal-title">ุชุณุฌูู ูููุณ ุดูุฑ</h3>
            <p style="text-align:center;color:#666;margin:15px 0;">ุณูุชู ุชุณุฌูู ุงููุจูุบ ุชููุงุฆูุงู ูู ุณุนุฑ ุงููุฏุฑุณ</p>
            <div class="modal-buttons">
                <button class="btn-primary" onclick="recordPayment()">ุชุณุฌูู</button>
                <button class="btn-secondary" onclick="closeModal()">ุฅูุบุงุก</button>
            </div>
        </div>
    </div>

    <!-- Modal ุชุนุฏูู ุงููุฏุฑุณ -->
    <div id="edit-teacher-modal" class="modal">
        <div class="modal-content">
            <h3>ุชุนุฏูู ุจูุงูุงุช ุงููุฏุฑุณ</h3>
            <input type="text" id="edit-teacher-name" placeholder="ุงุณู ุงููุฏุฑุณ" class="input">
            <input type="tel" id="edit-teacher-phone" placeholder="ุฑูู ูุงุชู ุงููุฏุฑุณ" class="input">
            <input type="number" id="edit-teacher-price" placeholder="ุณุนุฑ ุงูุดูุฑ" class="input">
            <div class="modal-buttons">
                <button class="btn-primary" onclick="saveTeacherEdit()">ุญูุธ</button>
                <button class="btn-secondary" onclick="closeModal()">ุฅูุบุงุก</button>
            </div>
        </div>
    </div>

    <!-- Modal ุชุนุฏูู ุงูุทุงูุจ -->
    <div id="edit-student-modal" class="modal">
        <div class="modal-content">
            <h3>ุชุนุฏูู ุจูุงูุงุช ุงูุทุงูุจ</h3>
            <input type="text" id="edit-student-name" placeholder="ุงุณู ุงูุทุงูุจ" class="input">
            <input type="tel" id="edit-student-phone" placeholder="ุฑูู ุงูุทุงูุจ" class="input">
            <input type="tel" id="edit-student-parent" placeholder="ุฑูู ููู ุงูุฃูุฑ" class="input">
            <textarea id="edit-student-notes" placeholder="ููุงุญุธุงุช" class="input" rows="3"></textarea>
            <div class="modal-buttons">
                <button class="btn-primary" onclick="saveStudentEdit()">ุญูุธ</button>
                <button class="btn-secondary" onclick="closeModal()">ุฅูุบุงุก</button>
            </div>
        </div>
    </div>

    <!-- Modal ุฅุถุงูุฉ ูุงุฏุฉ -->
    <div id="add-subject-modal" class="modal">
        <div class="modal-content">
            <h3>ุฅุถุงูุฉ ูุงุฏุฉ ุฌุฏูุฏุฉ</h3>
            <input type="text" id="subject-name-input" placeholder="ุงุณู ุงููุงุฏุฉ" class="input">
            <div class="modal-buttons">
                <button class="btn-primary" onclick="addNewSubject()">ุฅุถุงูุฉ</button>
                <button class="btn-secondary" onclick="closeModal()">ุฅูุบุงุก</button>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="app.js"></script>
</body>
</html>
